# 智慧办公楼系统 - 快速启动指南

## ✅ 构建状态
- ✅ smart-office-parent (父项目) - 构建成功
- ✅ common (公共模块) - 构建成功
- ✅ device-service (45MB) - 构建成功
- ✅ user-service (47MB) - 构建成功

## 🚀 启动服务

### 前置条件检查
请确保以下服务已启动：
- [x] MySQL 数据库（端口 3306）
- [x] Redis（端口 6379）
- [x] MQTT Broker（端口 1883，如 Mosquitto）

### 1. 初始化数据库

```bash
# 导入数据库脚本
mysql -u root -p < database/init.sql

# 默认账号
# 管理员: admin / admin123
# 普通用户: user / user123
```

### 2. 启动后端服务

**方式一：使用Maven运行（推荐开发时使用）**

```bash
# 启动 device-service（端口 8081）
cd E:\java毕设\智慧办公楼系统\backend\device-service
mvn spring-boot:run

# 新开一个终端，启动 user-service（端口 8082）
cd E:\java毕设\智慧办公楼系统\backend\user-service
mvn spring-boot:run
```

**方式二：直接运行JAR文件**

```bash
# 启动 device-service
cd E:\java毕设\智慧办公楼系统\backend\device-service\target
java -jar device-service-1.0.0.jar

# 新开一个终端，启动 user-service
cd E:\java毕设\智慧办公楼系统\backend\user-service\target
java -jar user-service-1.0.0.jar
```

### 3. 启动前端

```bash
cd E:\java毕设\智慧办公楼系统\frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

## 📍 访问地址

- 前端页面: http://localhost:5173
- Device Service: http://localhost:8081
- User Service: http://localhost:8082

## 🔧 配置文件位置

- device-service配置: `backend/device-service/src/main/resources/application.yml`
- user-service配置: `backend/user-service/src/main/resources/application.yml`

### 重要配置项

**MySQL配置（两个服务都需要修改）：**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/smart_office
    username: root
    password: your_password  # 修改为你的MySQL密码
```

**Redis配置：**
```yaml
spring:
  redis:
    host: localhost
    port: 6379
```

**MQTT配置（device-service）：**
```yaml
mqtt:
  broker-url: tcp://localhost:1883
  client-id: smart-office-server
```

## ❗ 常见问题

### 1. 端口被占用
如果8081或8082端口被占用，修改`application.yml`中的`server.port`

### 2. 数据库连接失败
- 检查MySQL是否启动
- 检查用户名密码是否正确
- 检查数据库`smart_office`是否已创建

### 3. Redis连接失败
- 检查Redis是否启动：`redis-cli ping`

### 4. MQTT连接失败
- 安装Mosquitto：`winget install EclipseMosquitto`
- 启动Mosquitto：`net start mosquitto`

## 📦 项目结构
```
智慧办公楼系统/
├── backend/
│   ├── common/ - 公共模块
│   ├── device-service/ - 设备管理服务 ⭐
│   ├── user-service/ - 用户认证服务 ⭐
│   └── smart-office-parent/ - Maven父项目
├── frontend/ - Vue3前端 ⭐
├── database/ - 数据库脚本
└── docs/ - 文档
```

## 🎯 下一步
1. 启动MySQL、Redis、MQTT Broker
2. 导入数据库
3. 启动后端服务（device-service + user-service）
4. 启动前端
5. 访问 http://localhost:5173 并使用 admin/admin123 登录

---
**构建时间**: 2025年10月18日
**构建工具**: Maven 3.x + Node.js 16+
